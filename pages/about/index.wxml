<!--pages/about/index.wxml-->
<view class="container">
  <!-- ä½œè€…ä¿¡æ¯å¡ç‰‡ -->
  <view class="card author-card">
    <view class="author-header">
      <image 
        class="author-avatar" 
        src="{{siteInfo.avatar || '/images/default-avatar.png'}}" 
        mode="aspectFill"
      />
      <view class="author-info">
        <view class="author-name">{{siteInfo.author || 'åšä¸»'}}</view>
        <view class="author-description">
          {{siteInfo.description || 'è¿™æ˜¯ä¸€ä¸ªç”±NotionNextç”Ÿæˆçš„åšå®¢'}}
        </view>
        <view class="author-mbti">
          <text class="mbti-label">MBTI:</text>
          <text class="mbti-type">INFJ</text>
          <text class="mbti-desc">æå€¡è€…å‹äººæ ¼</text>
        </view>
      </view>
    </view>
    <scroll-view class="infj-traits" scroll-x="true" show-scrollbar="false">
      <view class="traits-container">
        <view class="trait-item">ğŸ¯ ç†æƒ³ä¸»ä¹‰è€…</view>
        <view class="trait-item">ğŸ’¡ å¯Œæœ‰åˆ›é€ åŠ›</view>
        <view class="trait-item">ğŸ¤ å–„äºç†è§£ä»–äºº</view>
        <view class="trait-item">ğŸ“š çƒ­çˆ±å­¦ä¹ æˆé•¿</view>
      </view>
    </scroll-view>
  </view>

  <!-- ç»Ÿè®¡ä¿¡æ¯ -->
  <view class="stats-section">
    <view class="stats-header">
      <text class="section-title">ğŸ“Š åšå®¢ç»Ÿè®¡</text>
      <text class="last-update-text">  {{statistics.formattedLatestPostDate}}</text>
    </view>
    <view class="stats-grid">
      <view class="stat-card">
        <view class="stat-number">{{statistics.postCount || 0}}</view>
        <view class="stat-label">æ–‡ç« æ•°</view>
      </view>
      <view class="stat-card">
        <view class="stat-number">{{statistics.categoryCount || 0}}</view>
        <view class="stat-label">åˆ†ç±»æ•°</view>
      </view>
      <view class="stat-card">
        <view class="stat-number">{{statistics.tagCount || 0}}</view>
        <view class="stat-label">æ ‡ç­¾æ•°</view>
      </view>
      <view class="stat-card">
        <view class="stat-number">{{formattedSiteDays}}</view>
        <view class="stat-label">å»ºç«™å¤©æ•°</view>
      </view>
    </view>
  </view>

  <!-- æœ€æ–°æ–‡ç«  -->
  <view wx:if="{{latestPosts.length > 0}}" class="latest-posts-section">
    <view class="section-title">ğŸ“ æœ€æ–°æ–‡ç« </view>
    <view class="latest-posts">
      <view 
        wx:for="{{latestPosts}}" 
        wx:key="id"
        class="latest-post-item"
        bindtap="onPostTap"
        data-slug="{{item.slug}}"
        data-id="{{item.id}}"
      >
        <image 
          wx:if="{{item.pageCoverThumbnail}}"
          class="latest-post-cover" 
          src="{{item.pageCoverThumbnail}}" 
          mode="aspectFill"
          lazy-load
        />
        <view class="latest-post-info">
          <view class="latest-post-title">{{item.title}}</view>
          <view class="latest-post-date">{{item.formattedDate}}</view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç¤¾äº¤è”ç³» -->
  <view class="social-section">
    <view class="section-title">ğŸ”— è”ç³»æ–¹å¼</view>
    <view class="social-links">
      <!-- GitHub -->
      <view class="social-link" bindtap="onSocialTap" data-type="github" data-value="hehouhui">
        <text class="social-icon">ğŸ™</text>
        <text class="social-text">GitHub</text>
      </view>
      <!-- å¾®ä¿¡å…¬ä¼—å· -->
      <view class="social-link" bindtap="onSocialTap" data-type="wechat_mp" data-value="hehouhui">
        <text class="social-icon">ğŸ“±</text>
        <text class="social-text">å¾®ä¿¡å…¬ä¼—å·</text>
      </view>
      <!-- é‚®ç®± -->
      <view class="social-link" bindtap="onSocialTap" data-type="email" data-value="hehouhui@gmail.com">
        <text class="social-icon">ğŸ“§</text>
        <text class="social-text">é‚®ç®±</text>
      </view>
      <!-- çŸ¥ä¹ -->
      <view class="social-link" bindtap="onSocialTap" data-type="zhihu" data-value="https://www.zhihu.com/people/hehouhui">
        <text class="social-icon">ğŸ”µ</text>
        <text class="social-text">çŸ¥ä¹</text>
      </view>
      <!-- æ˜é‡‘ -->
      <view class="social-link" bindtap="onSocialTap" data-type="juejin" data-value="https://juejin.cn/user/hehouhui">
        <text class="social-icon">ğŸ’</text>
        <text class="social-text">æ˜é‡‘</text>
      </view>
      <!-- Bç«™ -->
      <view class="social-link" bindtap="onSocialTap" data-type="bilibili" data-value="https://space.bilibili.com/hehouhui">
        <text class="social-icon">ğŸ“º</text>
        <text class="social-text">Bç«™</text>
      </view>
      <!-- åŠ¨æ€ç¤¾äº¤é“¾æ¥ -->
      <view 
        wx:for="{{socialLinksArray}}" 
        wx:key="type"
        class="social-link"
        bindtap="onSocialTap"
        data-type="{{item.type}}"
        data-value="{{item.value}}"
      >
        <text class="social-icon">{{item.icon}}</text>
        <text class="social-text">{{item.label}}</text>
      </view>
    </view>
  </view>

  <!-- è”ç³»å®¢æœ -->
  <view class="contact-section">
    <view class="section-title">ğŸ’¬ è”ç³»å®¢æœ</view>
    <button 
      class="contact-btn"
      open-type="contact"
      bindcontact="onContactTap"
      session-from="miniprogram"
    >
      <text class="contact-icon">ğŸ’¬</text>
      <text class="contact-text">è”ç³»å®¢æœ</text>
    </button>
  </view>

  <!-- å…³äºåšå®¢ -->
  <view class="about-section">
    <view class="section-title">â„¹ï¸ å…³äºåšå®¢</view>
    <view class="about-content">
      <view class="about-item">
        <text class="about-label">åšå®¢åœ°å€ï¼š</text>
        <text class="about-value" bindtap="onLinkTap" data-url="{{siteInfo.link}}">{{siteInfo.link}}</text>
      </view>
      <view class="about-item">
        <text class="about-label">å»ºç«™æ—¶é—´ï¼š</text>
        <text class="about-value">{{statistics.formattedFirstPostDate}}</text>
      </view>
      <view class="about-item">
        <text class="about-label">æŠ€æœ¯æ ˆï¼š</text>
        <text class="about-value">NotionNext + å¾®ä¿¡å°ç¨‹åº</text>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading">
    <view class="loading-text">åŠ è½½ä¸­...</view>
  </view>

  <!-- é”™è¯¯çŠ¶æ€ -->
  <view wx:if="{{error}}" class="error">
    <view class="error-icon">ğŸ˜•</view>
    <view class="error-text">{{error}}</view>
    <button class="btn btn-primary" bindtap="retry">é‡è¯•</button>
  </view>
</view>